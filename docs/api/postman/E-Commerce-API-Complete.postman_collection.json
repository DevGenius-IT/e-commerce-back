{
	"info": {
		"_postman_id": "e-commerce-api-complete",
		"name": "E-Commerce API - Complete Collection",
		"description": "Collection compl√®te pour l'API Gateway e-commerce avec tous les microservices",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "e-commerce-team"
	},
	"item": [
		{
			"name": "Health & Status",
			"item": [
				{
					"name": "API Gateway Health",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/health",
							"host": ["{{base_url}}"],
							"path": ["api", "health"]
						}
					},
					"response": []
				},
				{
					"name": "API Gateway Health V1",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/v1/health",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "health"]
						}
					},
					"response": []
				},
				{
					"name": "Services Status",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/services/status",
							"host": ["{{base_url}}"],
							"path": ["api", "services", "status"]
						}
					},
					"response": []
				},
				{
					"name": "Test RabbitMQ Connection",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/test-rabbitmq",
							"host": ["{{base_url}}"],
							"path": ["api", "test-rabbitmq"]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Authentication",
			"item": [
				{
					"name": "Login",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    var jsonData = pm.response.json();",
									"    if (jsonData.token) {",
									"        pm.environment.set(\"auth_token\", jsonData.token);",
									"        pm.environment.set(\"user_id\", jsonData.user.id);",
									"        pm.environment.set(\"user_email\", jsonData.user.email);",
									"        console.log(\"Token saved: \" + jsonData.token);",
									"    }",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"admin@example.com\",\n  \"password\": \"password\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/v1/login",
							"host": ["{{base_url}}"],
							"path": ["api", "v1", "login"]
						},
						"description": "Authenticate user and receive JWT token"
					},
					"response": []
				},
				{
					"name": "Login (Direct)",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    var jsonData = pm.response.json();",
									"    if (jsonData.token) {",
									"        pm.environment.set(\"auth_token\", jsonData.token);",
									"        pm.environment.set(\"user_id\", jsonData.user.id);",
									"        pm.environment.set(\"user_email\", jsonData.user.email);",
									"    }",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"admin@example.com\",\n  \"password\": \"password\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/login",
							"host": ["{{base_url}}"],
							"path": ["api", "login"]
						}
					},
					"response": []
				},
				{
					"name": "Validate Token",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/auth/validate-token",
							"host": ["{{base_url}}"],
							"path": ["api", "auth", "validate-token"]
						}
					},
					"response": []
				},
				{
					"name": "Refresh Token",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    var jsonData = pm.response.json();",
									"    if (jsonData.token) {",
									"        pm.environment.set(\"auth_token\", jsonData.token);",
									"    }",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/auth/refresh",
							"host": ["{{base_url}}"],
							"path": ["api", "auth", "refresh"]
						}
					},
					"response": []
				},
				{
					"name": "Logout",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/auth/logout",
							"host": ["{{base_url}}"],
							"path": ["api", "auth", "logout"]
						}
					},
					"response": []
				},
				{
					"name": "Get Current User",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/auth/me",
							"host": ["{{base_url}}"],
							"path": ["api", "auth", "me"]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Products",
			"item": [
				{
					"name": "List Products",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/products/products",
							"host": ["{{base_url}}"],
							"path": ["api", "products", "products"]
						}
					},
					"response": []
				},
				{
					"name": "Get Product",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/products/products/{{product_id}}",
							"host": ["{{base_url}}"],
							"path": ["api", "products", "products", "{{product_id}}"]
						}
					},
					"response": []
				},
				{
					"name": "Create Product",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"Product Name\",\n  \"description\": \"Product description\",\n  \"price\": 99.99,\n  \"stock\": 100,\n  \"category_id\": 1\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/products/products",
							"host": ["{{base_url}}"],
							"path": ["api", "products", "products"]
						}
					},
					"response": []
				},
				{
					"name": "Update Product",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"Updated Product Name\",\n  \"price\": 89.99,\n  \"stock\": 150\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/products/products/{{product_id}}",
							"host": ["{{base_url}}"],
							"path": ["api", "products", "products", "{{product_id}}"]
						}
					},
					"response": []
				},
				{
					"name": "Delete Product",
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/products/products/{{product_id}}",
							"host": ["{{base_url}}"],
							"path": ["api", "products", "products", "{{product_id}}"]
						}
					},
					"response": []
				},
				{
					"name": "List Categories",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/products/categories",
							"host": ["{{base_url}}"],
							"path": ["api", "products", "categories"]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Baskets",
			"item": [
				{
					"name": "Get My Basket",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/baskets/baskets",
							"host": ["{{base_url}}"],
							"path": ["api", "baskets", "baskets"]
						}
					},
					"response": []
				},
				{
					"name": "Add Item to Basket",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"product_id\": 1,\n  \"quantity\": 2\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/baskets/items",
							"host": ["{{base_url}}"],
							"path": ["api", "baskets", "items"]
						}
					},
					"response": []
				},
				{
					"name": "Update Basket Item",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"quantity\": 3\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/baskets/items/{{item_id}}",
							"host": ["{{base_url}}"],
							"path": ["api", "baskets", "items", "{{item_id}}"]
						}
					},
					"response": []
				},
				{
					"name": "Remove Item from Basket",
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/baskets/items/{{item_id}}",
							"host": ["{{base_url}}"],
							"path": ["api", "baskets", "items", "{{item_id}}"]
						}
					},
					"response": []
				},
				{
					"name": "Clear Basket",
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/baskets/baskets",
							"host": ["{{base_url}}"],
							"path": ["api", "baskets", "baskets"]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Orders",
			"item": [
				{
					"name": "List My Orders",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/orders/orders",
							"host": ["{{base_url}}"],
							"path": ["api", "orders", "orders"]
						}
					},
					"response": []
				},
				{
					"name": "Get Order",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/orders/orders/{{order_id}}",
							"host": ["{{base_url}}"],
							"path": ["api", "orders", "orders", "{{order_id}}"]
						}
					},
					"response": []
				},
				{
					"name": "Create Order",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"address_id\": 1,\n  \"payment_method\": \"credit_card\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/orders/orders",
							"host": ["{{base_url}}"],
							"path": ["api", "orders", "orders"]
						}
					},
					"response": []
				},
				{
					"name": "Cancel Order",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/orders/orders/{{order_id}}/cancel",
							"host": ["{{base_url}}"],
							"path": ["api", "orders", "orders", "{{order_id}}", "cancel"]
						}
					},
					"response": []
				},
				{
					"name": "Process Payment",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"order_id\": \"{{order_id}}\",\n  \"payment_method\": \"credit_card\",\n  \"amount\": 99.99\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/orders/payments",
							"host": ["{{base_url}}"],
							"path": ["api", "orders", "payments"]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Addresses",
			"item": [
				{
					"name": "List My Addresses",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/addresses/addresses",
							"host": ["{{base_url}}"],
							"path": ["api", "addresses", "addresses"]
						}
					},
					"response": []
				},
				{
					"name": "Get Address",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/addresses/addresses/{{address_id}}",
							"host": ["{{base_url}}"],
							"path": ["api", "addresses", "addresses", "{{address_id}}"]
						}
					},
					"response": []
				},
				{
					"name": "Create Address",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"street\": \"123 Main Street\",\n  \"city\": \"Paris\",\n  \"postal_code\": \"75001\",\n  \"country\": \"France\",\n  \"is_default\": true\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/addresses/addresses",
							"host": ["{{base_url}}"],
							"path": ["api", "addresses", "addresses"]
						}
					},
					"response": []
				},
				{
					"name": "Update Address",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"street\": \"456 New Street\",\n  \"city\": \"Lyon\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/addresses/addresses/{{address_id}}",
							"host": ["{{base_url}}"],
							"path": ["api", "addresses", "addresses", "{{address_id}}"]
						}
					},
					"response": []
				},
				{
					"name": "Delete Address",
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/addresses/addresses/{{address_id}}",
							"host": ["{{base_url}}"],
							"path": ["api", "addresses", "addresses", "{{address_id}}"]
						}
					},
					"response": []
				},
				{
					"name": "List Countries",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/addresses/countries",
							"host": ["{{base_url}}"],
							"path": ["api", "addresses", "countries"]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Deliveries",
			"item": [
				{
					"name": "List My Deliveries",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/deliveries/deliveries",
							"host": ["{{base_url}}"],
							"path": ["api", "deliveries", "deliveries"]
						}
					},
					"response": []
				},
				{
					"name": "Track Delivery",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/deliveries/deliveries/{{delivery_id}}/track",
							"host": ["{{base_url}}"],
							"path": ["api", "deliveries", "deliveries", "{{delivery_id}}", "track"]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Newsletters",
			"item": [
				{
					"name": "Subscribe to Newsletter",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"user@example.com\",\n  \"name\": \"John Doe\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/newsletters/subscribe",
							"host": ["{{base_url}}"],
							"path": ["api", "newsletters", "subscribe"]
						}
					},
					"response": []
				},
				{
					"name": "Unsubscribe from Newsletter",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"user@example.com\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/newsletters/unsubscribe",
							"host": ["{{base_url}}"],
							"path": ["api", "newsletters", "unsubscribe"]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Contacts",
			"item": [
				{
					"name": "Submit Contact Form",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"name\": \"John Doe\",\n  \"email\": \"john@example.com\",\n  \"subject\": \"Product Inquiry\",\n  \"message\": \"I have a question about your products...\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/contacts/contacts",
							"host": ["{{base_url}}"],
							"path": ["api", "contacts", "contacts"]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "SAV (Customer Service)",
			"item": [
				{
					"name": "List My Tickets",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/sav/tickets",
							"host": ["{{base_url}}"],
							"path": ["api", "sav", "tickets"]
						}
					},
					"response": []
				},
				{
					"name": "Get Ticket",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/sav/tickets/{{ticket_id}}",
							"host": ["{{base_url}}"],
							"path": ["api", "sav", "tickets", "{{ticket_id}}"]
						}
					},
					"response": []
				},
				{
					"name": "Create Ticket",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"subject\": \"Product Issue\",\n  \"description\": \"I have a problem with my order #123\",\n  \"priority\": \"high\",\n  \"category\": \"order_issue\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/sav/tickets",
							"host": ["{{base_url}}"],
							"path": ["api", "sav", "tickets"]
						}
					},
					"response": []
				},
				{
					"name": "Reply to Ticket",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							},
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"message\": \"Additional information about my issue...\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/api/sav/tickets/{{ticket_id}}/reply",
							"host": ["{{base_url}}"],
							"path": ["api", "sav", "tickets", "{{ticket_id}}", "reply"]
						}
					},
					"response": []
				},
				{
					"name": "Close Ticket",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{auth_token}}"
							}
						],
						"url": {
							"raw": "{{base_url}}/api/sav/tickets/{{ticket_id}}/close",
							"host": ["{{base_url}}"],
							"path": ["api", "sav", "tickets", "{{ticket_id}}", "close"]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "Questions (FAQ)",
			"item": [
				{
					"name": "List Questions",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/questions/questions",
							"host": ["{{base_url}}"],
							"path": ["api", "questions", "questions"]
						}
					},
					"response": []
				},
				{
					"name": "Search Questions",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/api/questions/questions/search?q=shipping",
							"host": ["{{base_url}}"],
							"path": ["api", "questions", "questions", "search"],
							"query": [
								{
									"key": "q",
									"value": "shipping"
								}
							]
						}
					},
					"response": []
				}
			]
		}
	],
	"variable": [
		{
			"key": "base_url",
			"value": "http://localhost:8100",
			"type": "string"
		},
		{
			"key": "auth_token",
			"value": "",
			"type": "string"
		},
		{
			"key": "user_id",
			"value": "",
			"type": "string"
		},
		{
			"key": "user_email",
			"value": "",
			"type": "string"
		},
		{
			"key": "product_id",
			"value": "1",
			"type": "string"
		},
		{
			"key": "order_id",
			"value": "",
			"type": "string"
		},
		{
			"key": "address_id",
			"value": "1",
			"type": "string"
		},
		{
			"key": "item_id",
			"value": "1",
			"type": "string"
		},
		{
			"key": "delivery_id",
			"value": "1",
			"type": "string"
		},
		{
			"key": "ticket_id",
			"value": "1",
			"type": "string"
		}
	]
}
